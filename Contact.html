<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contact | Henry</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<link rel="stylesheet" href="contactstlye.css">
</head>
<body>

<header>
  <a href="index.html" class="logo">Henry</a>
  <i class="fas fa-bars menu-toggle" id="menuToggle"></i>
  <nav id="navMenu">
    <a href="index.html">Home</a>
    <a href="Mywork.html">My Work</a>
    <a href="contact.html" class="active">Contact</a>
  </nav>
</header>

<main class="container">

  <div class="contact-wrapper">

    <!-- LEFT INFO -->
    <div class="contact-info reveal">
      <h1>Contact Me</h1>
      <p class="subtitle">Hire a professional Roblox developer. Fastest way to reach me is Discord.</p>

      <a href="https://discord.gg/G93crY2JGC" target="_blank" class="hire-btn reveal">
        <i class="fab fa-discord"></i> Join my Discord
      </a>

      <div class="social-icons reveal">
        <a href="https://www.roblox.com/users/5789251932/profile" target="_blank"><i class="fas fa-gamepad"></i></a>
        <a href="https://github.com/henryrbx" target="_blank"><i class="fab fa-github"></i></a>
        <a href="https://x.com/henryonrbx" target="_blank"><i class="fab fa-x-twitter"></i></a>
        <a href="https://www.youtube.com/@HenryRbx" target="_blank"><i class="fab fa-youtube"></i></a>
      </div>
    </div>

    <!-- RIGHT FORM -->
    <div class="contact-form reveal">
      <form id="commissionForm">
        <h2>Commission Request</h2>

        <div class="closed-message" id="closedMessage">
          ðŸš« Commissions are closed â€” please come back later
        </div>

        <div class="input-box reveal" style="--delay:0ms;">
          <input type="text" name="roblox_username" required>
          <label>Roblox Username / Studio</label>
        </div>

        <div class="input-box reveal" style="--delay:100ms;">
          <input type="email" name="email">
          <label>Email (optional)</label>
        </div>

        <div class="input-box reveal" style="--delay:200ms;">
          <input list="projectOptions" name="project_type" required>
          <label>Project Type</label>
          <datalist id="projectOptions">
            <option value="UI">
            <option value="Script">
            <option value="Build">
            <option value="Model">
          </datalist>
        </div>

        <div class="input-box reveal" style="--delay:300ms;">
          <input list="deadlineOptions" name="deadline" required>
          <label>Deadline</label>
          <datalist id="deadlineOptions">
            <option value="1-2 days">
            <option value="1 week">
            <option value="2 weeks">
            <option value="1 month">
          </datalist>
        </div>

        <div class="input-box reveal" style="--delay:400ms;">
          <input type="number" name="price" min="0" step="1" required>
          <label>Budget / Price (USD, Robux)</label>
        </div>

        <div class="input-box reveal" style="--delay:500ms;">
          <input type="text" name="reference">
          <label>Reference (Images/Videos)</label>
        </div>

        <div class="input-box textarea reveal" style="--delay:600ms;">
          <textarea name="message" required></textarea>
          <label>Describe your project</label>
        </div>

        <button type="submit" id="sendBtn" class="hire-btn reveal" style="--delay:700ms;">Send Request</button>
        <p id="status"></p>
      </form>
    </div>

  </div>

</main>

<script>
const AVAILABLE_FOR_COMMISSIONS = localStorage.getItem("commissionsOpen") === "yes";

const sendBtn = document.getElementById("sendBtn");
const closedMsg = document.getElementById("closedMessage");
const form = document.getElementById("commissionForm");
const statusText = document.getElementById("status");

if (!AVAILABLE_FOR_COMMISSIONS) {
  sendBtn.disabled = true;
  sendBtn.classList.add("disabled");
  closedMsg.classList.add("show");
  form.querySelectorAll("input, textarea").forEach(el => el.disabled = true);
}

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  if (!AVAILABLE_FOR_COMMISSIONS) {
    statusText.textContent = "Commissions are currently closed.";
    statusText.style.color = "#ff4d4d";
    return;
  }

  statusText.textContent = "Sending...";
  statusText.style.color = "#aaa";

  const payload = {
    roblox_username: form.roblox_username.value,
    email: form.email.value,
    price: form.price.value,
    project_type: form.project_type.value,
    deadline: form.deadline.value,
    reference: form.reference.value,
    message: form.message.value
  };

  try {
    const res = await fetch("https://commission-handler.henryonyt9.workers.dev/", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    if (res.ok) {
      statusText.textContent = "Request sent successfully!";
      statusText.style.color = "#4caf50";
      form.reset();
    } else throw new Error();
  } catch {
    statusText.textContent = "Failed to send.";
    statusText.style.color = "#ff4d4d";
  }
});

/* STAGGERED REVEAL */
document.querySelectorAll(".reveal").forEach(el => {
  const delay = el.style.getPropertyValue('--delay') || 0;
  setTimeout(() => el.classList.add("active"), parseInt(delay));
});

/* MOBILE NAV */
const menuToggle = document.getElementById("menuToggle");
const navMenu = document.getElementById("navMenu");
menuToggle.addEventListener("click", () => navMenu.classList.toggle("open"));
</script>

</body>
</html>

